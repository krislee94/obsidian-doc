[相关api](https://developer.chrome.com/docs/extensions/mv3/options/)



# 编写选项页面


```html
<!DOCTYPE html>
<html>
<head><title>My Test Extension Options</title></head>
<body>

Favorite color:
<select id="color">
 <option value="red">red</option>
 <option value="green">green</option>
 <option value="blue">blue</option>
 <option value="yellow">yellow</option>
</select>

<label>
  <input type="checkbox" id="like">
  I like colors.
</label>

<div id="status"></div>
<button id="save">Save</button>

<script src="options.js"></script>
</body>
</html>


```


使用[storage.sync](https://developer.chrome.com/docs/extensions/reference/storage#property-sync) API 跨设备保存用户的首选选项。




## 选项卡API

扩展嵌入选项页面代码未托管在选项卡内，这会影响[选项卡 API](https://developer.chrome.com/docs/extensions/reference/tabs/)的使用方式：

-   [tabs.query](https://developer.chrome.com/docs/extensions/reference/tabs#method-query)永远不会在扩展的选项页面 URL 中找到选项卡。
-   [打开选项页面时， tabs.onCreated](https://developer.chrome.com/docs/extensions/reference/tabs#event-onCreated)不会触发。
-   [tabs.onUpdated](https://developer.chrome.com/docs/extensions/reference/tabs#event-onUpdated)不会在选项页面加载状态更改时触发。
-   [tabs.connect](https://developer.chrome.com/docs/extensions/reference/tabs#method-connect)或[tabs.sendMessage](https://developer.chrome.com/docs/extensions/reference/tabs#method-sendMessage)不能用于与选项页面通信。

如果选项页面确实需要操作包含选项卡，则使用[runtime.connect](https://developer.chrome.com/docs/extensions/runtime#method-connect)和[runtime.sendMessage可以解决这些限制。](https://developer.chrome.com/docs/extensions/runtime#method-sendMessage)



## 消息API

如果扩展的选项页面使用[runtime.connect](https://developer.chrome.com/docs/extensions/runtime#method-connect)或[runtime.sendMessage](https://developer.chrome.com/docs/extensions/runtime#method-sendMessage)发送消息，则不会设置[Sender 的选项卡，并且](https://developer.chrome.com/docs/extensions/runtime#property-MessageSender-tab)[Sender 的 URL](https://developer.chrome.com/docs/extensions/runtime#property-MessageSender-url)将是选项页面的 URL。



## 尺寸


尺寸的选项应该根据页面内容自动确定自己的大小。但是，对于某些类型的内容，嵌入框可能找不到合适的尺寸。对于根据窗口大小调整其内容形状的选项页面，此问题最为常见。

如果这是一个问题，请为选项页面提供固定的最小尺寸，以确保嵌入页面找到合适的尺寸。